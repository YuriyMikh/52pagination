function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},o={},a=t.parcelRequired7c6;null==a&&((a=function(e){if(e in n)return n[e].exports;if(e in o){var t=o[e];delete o[e];var a={id:e,exports:{}};return n[e]=a,t.call(a.exports,a,a.exports),a.exports}var s=new Error("Cannot find module '"+e+"'");throw s.code="MODULE_NOT_FOUND",s}).register=function(e,t){o[e]=t},t.parcelRequired7c6=a),a("kyEFX").register(JSON.parse('{"7bk21":"index.aaf42934.js","7QMdA":"amazon.3c3f1cde.webp","CgNCO":"amazon.b0a6f23c.png","3CFHC":"apple.78ef44cc.webp","hYuvF":"apple.34efda77.png","lKiFj":"bookshop.bf5b4137.webp","1dJFY":"bookshop.11f8a97b.png","cjv10":"shopping-list.09458127.js"}'));var s=a("b2XdZ");var i;i=new URL(a("kyEFX").resolve("7QMdA"),import.meta.url).toString();var l;l=new URL(a("kyEFX").resolve("CgNCO"),import.meta.url).toString();var c;c=new URL(a("kyEFX").resolve("3CFHC"),import.meta.url).toString();var r;r=new URL(a("kyEFX").resolve("hYuvF"),import.meta.url).toString();var d;d=new URL(a("kyEFX").resolve("lKiFj"),import.meta.url).toString();var u;u=new URL(a("kyEFX").resolve("1dJFY"),import.meta.url).toString();var m=a("b5rV1"),p=(s=a("b2XdZ"),a("lPDaB"));const g=new(0,s.SwaggerAPI),b=document.querySelector(".backdrop"),y=document.querySelector(".modal-close-btn"),k=document.querySelector(".modal-btn"),v=document.querySelector(".modal-info"),f=document.querySelector(".modal-book");let h={};function L(){document.querySelectorAll(".book-link").forEach((e=>e.addEventListener("click",w)))}async function w(t){t.preventDefault(),document.body.style.overflow="hidden",b.classList.toggle("is-hidden"),b.addEventListener("click",F),window.addEventListener("keydown",_),y.addEventListener("click",H);try{g.bookId=t.currentTarget.dataset.id;const n=await g.fetchBookById();h=n.data,console.log(h),function(t){const n=`<img\nclass="modal-img"\nsrc=${t.book_image}\nalt="Book cover"\n/>\n<div class="modal-info-container">\n<p class="modal-book-name">${t.title}</p>\n<p class="modal-book-author">${t.author}</p>\n<p class="modal-list-name is-hidden">${t.list_name}</p>\n<p class="modal-book-desc">${t.description}\n</p>\n<div class="modal-icons-container">\n  <a href="${t.buy_links[0].url}" target="_blank" rel="noopener noreferrer"\n    ><picture class="modal-icon">\n      <source\n        srcset="${e(i)}"\n        type="image/webp"\n      />\n      <source\n        srcset="${e(l)}"\n        type="image/png"\n      />\n      <img\n        src="${e(l)}"\n        alt="Amazon"\n      /> </picture\n  ></a>\n  <a href="${t.buy_links[1].url}" target="_blank" rel="noopener noreferrer"\n    ><picture class="modal-icon">\n      <source\n        srcset="${e(c)}"\n        type="image/webp"\n      />\n      <source\n        srcset="${e(r)}"\n        type="image/png"\n      />\n      <img\n        src="${e(r)}"\n        alt="Apple Books"\n      /> </picture\n  ></a>\n  <a href="${t.buy_links[4].url}" target="_blank" rel="noopener noreferrer"\n    ><picture class="modal-icon">\n      <source\n        srcset="${e(d)}"\n        type="image/webp"\n      />\n      <source\n        srcset="${e(u)}"\n        type="image/png"\n      />\n      <img\n        src="${e(u)}"\n        alt="Bookshop"\n      /></picture\n  ></a>\n</div>\n</div>`;f.innerHTML=n}(h),function(e){const t=m.default.load("bookList");if(!t||0===t.length)return void S();for(book of t){if(book.title===e.title)return void $();S()}}(h),k.addEventListener("click",E)}catch{}}function E(){const e=m.default.load("bookList"),t=document.querySelector(".modal-book-name").textContent;"add to shopping list"===k.textContent?(m.default.addBookToStorage(h),$(),(0,p.countBook)()):(e.forEach(((e,n,o)=>{if(e.title===t)return o.splice(n,1)})),m.default.save("bookList",e),0===e.length&&m.default.remove("bookList"),(0,p.countBook)(),S())}function S(){k.textContent="add to shopping list",v.style.display="none"}function $(){k.textContent="remove from the shopping list",v.style.display="block"}function _(e){"Escape"===e.key&&H()}function F(e){e.target===b&&H()}function H(){b.classList.toggle("is-hidden"),document.body.style.overflow="visible",b.removeEventListener("click",F),window.removeEventListener("keydown",_),y.removeEventListener("click",H)}const q=document.querySelector(".aside-list"),C=document.querySelector(".aside-title"),A=document.querySelector(".main-content"),B=new(0,s.SwaggerAPI);(async()=>{try{const{data:e}=await B.fetchBooksCategoryList(),t=e.map((e=>`<a class="aside-link" ><li class="aside-item">${e.list_name}</li></a>`)).join("");q.innerHTML=t}catch(e){console.log(e)}})();let R=null;q.addEventListener("click",(e=>{const t=e.target.textContent;B.categoryName=t,R&&R.classList.remove("active"),R=e.target,R.classList.add("active"),C.classList.remove("active");(async()=>{try{const{data:n}=await B.fetchBooksByCategory(t);console.log(n);const o=n[0].list_name.split(" "),a=o[o.length-1],s=`${o.slice(0,o.length-1).join(" ")} <span class="categories-title-decor">${a}</span>`;A.innerHTML=`<h1 class="categories-title">${s}</h1> <ul class="categories-item">${e=n,e.map((e=>{const{book_image:t,description:n,title:o,author:a,_id:s}=e;return`\n\n<li class="category-list-item">\n<a class="book-link" href="" data-id = "${s}">\n<div class="book-thumb">\n<img class="book-image" src="${t}" alt="${n}" />\n<div class="book-overlay">\n<p class="book-overlay-text">quick view</p>\n</div>\n</div>\n<div class="book-card-content">\n<h2 class="book-title">${o}</h2>\n<p class="book-author">${a}</p>\n</div>\n</a>\n</li>`})).join("")}</ul>`,L()}catch(e){console.log(e)}var e})()})),a("3gLCb");const x=document.getElementById("mobile-menu-modal"),j=document.querySelector(".js-open-menu-burger"),M=document.querySelector(".close-mobile-modal-btn");j.addEventListener("click",(function(){x.style.display="block",j.classList.add("hidden"),M.classList.remove("hidden"),document.body.classList.add("modal-open")})),M.addEventListener("click",(function(){x.style.display="none",j.classList.remove("hidden"),M.classList.add("hidden"),document.body.classList.remove("modal-open")})),window.addEventListener("DOMContentLoaded",(function(){x.style.display="none",M.classList.add("hidden")})),a("bUb57");s=a("b2XdZ");function T(e){return e.map((e=>{const{book_image:t,description:n,title:o,author:a,_id:s}=e;return`<li class="books-list-item">\n                 <a class="book-link" href="" data-id="${s}">\n                    <div class="book-thumb">\n                      <img class="book-image" src="${t}" alt="${n}" />\n\n                        <div class="book-overlay">\n                       <p class="book-overlay-text">quick view</p>\n                       </div>\n                       </div>                     \n                     <div class="book-card-content">\n                     <h2 class="book-title">${o}</h2>\n                     <p class="book-author">${a}</p>\n                     </div>\n                 </a>                    \n              </li>`})).join("")}const X=document.querySelector(".category-list"),U=document.querySelector(".home-title"),N=new(0,s.SwaggerAPI);let O=0;function I(){document.querySelectorAll(".category-list-button").forEach((e=>{e.addEventListener("click",D)}))}async function D(e){try{const t=e.target.previousElementSibling.previousElementSibling.textContent;N.categoryName=t;const{data:n}=await N.fetchBooksByCategory();U.innerHTML=function(e){const t=e.split(" "),n=t[t.length-1];return`<span class="home-title-decor">${t.slice(0,t.length-1).join(" ")} </span>${n}`}(t),X.classList.add("category-list-click"),X.innerHTML=T(n),function(e){const t=document.querySelectorAll(".aside-item"),n=document.querySelector(".aside-title");t.forEach((t=>{e===t.textContent&&(n.classList.toggle("active"),t.classList.toggle("active"))}))}(t)}catch(e){console.log(e)}}onload=e=>{O=e.target.body.clientWidth},async function(){try{const{data:e}=await N.fetchTopBooks();for(let t=0;t<4;t++){let n=e[t].books,o=0;O<=767&&(o=1),O>=768&&O<1440&&(o=3),O>=1440&&(o=5);const a=`<li class="category-list-item top-list-item">\n        <p class="category-name" data-category-name="${n[0].list_name}">${n[0].list_name}</p>\n        <ul class="books-list">\n          ${T(n.slice(0,o))}\n        </ul>\n       <button class="category-list-button">see more</button>  \n      </li>`;X.insertAdjacentHTML("beforeend",a),I()}}catch(e){console.log(e)}L()}(),a("gyeM6");
//# sourceMappingURL=index.aaf42934.js.map
