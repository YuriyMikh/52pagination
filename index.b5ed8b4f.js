!function(){function e(e){return e&&e.__esModule?e.default:e}var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},t={},o={},a=n.parcelRequired7c6;null==a&&((a=function(e){if(e in t)return t[e].exports;if(e in o){var n=o[e];delete o[e];var a={id:e,exports:{}};return t[e]=a,n.call(a.exports,a,a.exports),a.exports}var c=new Error("Cannot find module '"+e+"'");throw c.code="MODULE_NOT_FOUND",c}).register=function(e,n){o[e]=n},n.parcelRequired7c6=a),a("iE7OH").register(JSON.parse('{"9p9yL":"index.b5ed8b4f.js","2dPzb":"amazon.3c3f1cde.webp","82OGy":"amazon.b0a6f23c.png","glj45":"apple.78ef44cc.webp","cKFxX":"apple.34efda77.png","kLXsS":"bookshop.bf5b4137.webp","jA3cI":"bookshop.11f8a97b.png","bBRCa":"shopping-list.75ece668.js"}'));var c=a("bpxeT"),r=a("2TvXO"),s=a("hrrt1");var i;c=a("bpxeT"),r=a("2TvXO");i=a("aNJCr").getBundleURL("9p9yL")+a("iE7OH").resolve("2dPzb");var l;l=a("aNJCr").getBundleURL("9p9yL")+a("iE7OH").resolve("82OGy");var d;d=a("aNJCr").getBundleURL("9p9yL")+a("iE7OH").resolve("glj45");var u;u=a("aNJCr").getBundleURL("9p9yL")+a("iE7OH").resolve("cKFxX");var p;p=a("aNJCr").getBundleURL("9p9yL")+a("iE7OH").resolve("kLXsS");var v;v=a("aNJCr").getBundleURL("9p9yL")+a("iE7OH").resolve("jA3cI");var m=a("4LMMA"),f=(s=a("hrrt1"),a("i9Oqj")),b=new(0,s.SwaggerAPI),g=document.querySelector(".backdrop"),y=document.querySelector(".modal-close-btn"),k=document.querySelector(".modal-btn"),h=document.querySelector(".modal-info"),L=document.querySelector(".modal-book"),w={};function E(){document.querySelectorAll(".book-link").forEach((function(e){return e.addEventListener("click",x)}))}function x(e){return S.apply(this,arguments)}function S(){return(S=e(c)(e(r).mark((function n(t){var o;return e(r).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),document.body.style.overflow="hidden",g.classList.toggle("is-hidden"),g.addEventListener("click",O),window.addEventListener("keydown",C),y.addEventListener("click",R),e.prev=6,b.bookId=t.currentTarget.dataset.id,e.next=10,b.fetchBookById();case 10:o=e.sent,w=o.data,console.log(w),A(w),_(w),k.addEventListener("click",H),e.next=21;break;case 18:e.prev=18,e.t0=e.catch(6);case 21:case"end":return e.stop()}}),n,null,[[6,18]])})))).apply(this,arguments)}function _(e){var n=m.default.load("bookList");if(n&&0!==n.length){var t=!0,o=!1,a=void 0;try{for(var c,r=n[Symbol.iterator]();!(t=(c=r.next()).done);t=!0){if(book=c.value,book.title===e.title)return void B();q()}}catch(e){o=!0,a=e}finally{try{t||null==r.return||r.return()}finally{if(o)throw a}}}else q()}function H(){var e=m.default.load("bookList"),n=document.querySelector(".modal-book-name").textContent;"add to shopping list"===k.textContent?(m.default.addBookToStorage(w),B(),(0,f.countBook)()):(e.forEach((function(e,t,o){if(e.title===n)return o.splice(t,1)})),m.default.save("bookList",e),0===e.length&&m.default.remove("bookList"),(0,f.countBook)(),q())}function q(){k.textContent="add to shopping list",h.style.display="none"}function B(){k.textContent="remove from the shopping list",h.style.display="block"}function A(n){var t='<img\nclass="modal-img"\nsrc='.concat(n.book_image,'\nalt="Book cover"\n/>\n<div class="modal-info-container">\n<p class="modal-book-name">').concat(n.title,'</p>\n<p class="modal-book-author">').concat(n.author,'</p>\n<p class="modal-list-name is-hidden">').concat(n.list_name,'</p>\n<p class="modal-book-desc">').concat(n.description,'\n</p>\n<div class="modal-icons-container">\n  <a href="').concat(n.buy_links[0].url,'" target="_blank" rel="noopener noreferrer"\n    ><picture class="modal-icon">\n      <source\n        srcset="').concat(e(i),'"\n        type="image/webp"\n      />\n      <source\n        srcset="').concat(e(l),'"\n        type="image/png"\n      />\n      <img\n        src="').concat(e(l),'"\n        alt="Amazon"\n      /> </picture\n  ></a>\n  <a href="').concat(n.buy_links[1].url,'" target="_blank" rel="noopener noreferrer"\n    ><picture class="modal-icon">\n      <source\n        srcset="').concat(e(d),'"\n        type="image/webp"\n      />\n      <source\n        srcset="').concat(e(u),'"\n        type="image/png"\n      />\n      <img\n        src="').concat(e(u),'"\n        alt="Apple Books"\n      /> </picture\n  ></a>\n  <a href="').concat(n.buy_links[4].url,'" target="_blank" rel="noopener noreferrer"\n    ><picture class="modal-icon">\n      <source\n        srcset="').concat(e(p),'"\n        type="image/webp"\n      />\n      <source\n        srcset="').concat(e(v),'"\n        type="image/png"\n      />\n      <img\n        src="').concat(e(v),'"\n        alt="Bookshop"\n      /></picture\n  ></a>\n</div>\n</div>');L.innerHTML=t}function C(e){"Escape"===e.key&&R()}function O(e){e.target===g&&R()}function R(){g.classList.toggle("is-hidden"),document.body.style.overflow="visible",g.removeEventListener("click",O),window.removeEventListener("keydown",C),y.removeEventListener("click",R)}var T,j=document.querySelector(".aside-list"),F=document.querySelector(".aside-title"),M=document.querySelector(".main-content"),N=new(0,s.SwaggerAPI),I=(T=e(c)(e(r).mark((function n(){var t,o;return e(r).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,N.fetchBooksCategoryList();case 3:t=e.sent.data,o=t.map((function(e){return'<a class="aside-link" ><li class="aside-item">'.concat(e.list_name,"</li></a>")})).join(""),j.innerHTML=o,e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),n,null,[[0,8]])}))),function(){return T.apply(this,arguments)});I();var U=null;j.addEventListener("click",(function(n){var t=n.target.textContent;N.categoryName=t,U&&U.classList.remove("active"),(U=n.target).classList.add("active"),F.classList.remove("active");var o=function(){var n=e(c)(e(r).mark((function n(){var o,a,c,s,i,l;return e(r).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,N.fetchBooksByCategory(t);case 3:o=e.sent.data,console.log(o),a=o[0].list_name,c=a.split(" "),s=c[c.length-1],i=c.slice(0,c.length-1).join(" "),l="".concat(i,' <span class="categories-title-decor">').concat(s,"</span>"),M.innerHTML='<h1 class="categories-title">'.concat(l,'</h1> <ul class="categories-item">').concat(o.map((function(e){var n=e.book_image,t=e.description,o=e.title,a=e.author,c=e._id;return'\n\n<li class="category-list-item">\n<a class="book-link" href="" data-id = "'.concat(c,'">\n<div class="book-thumb">\n<img class="book-image" src="').concat(n,'" alt="').concat(t,'" />\n<div class="book-overlay">\n<p class="book-overlay-text">quick view</p>\n</div>\n</div>\n<div class="book-card-content">\n<h2 class="book-title">').concat(o,'</h2>\n<p class="book-author">').concat(a,"</p>\n</div>\n</a>\n</li>")})).join(""),"</ul>"),E(),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),console.log(e.t0);case 17:case"end":return e.stop()}}),n,null,[[0,14]])})));return function(){return n.apply(this,arguments)}}();o()})),a("71ZRj");var J=document.getElementById("mobile-menu-modal"),X=document.querySelector(".js-open-menu-burger"),z=document.querySelector(".close-mobile-modal-btn");X.addEventListener("click",(function(){J.style.display="block",X.classList.add("hidden"),z.classList.remove("hidden"),document.body.classList.add("modal-open")})),z.addEventListener("click",(function(){J.style.display="none",X.classList.remove("hidden"),z.classList.add("hidden"),document.body.classList.remove("modal-open")})),window.addEventListener("DOMContentLoaded",(function(){J.style.display="none",z.classList.add("hidden")})),a("i8Q71");c=a("bpxeT"),r=a("2TvXO"),s=a("hrrt1");function P(e){return e.map((function(e){var n=e.book_image,t=e.description,o=e.title,a=e.author,c=e._id;return'<li class="books-list-item">\n                 <a class="book-link" href="" data-id="'.concat(c,'">\n                    <div class="book-thumb">\n                      <img class="book-image" src="').concat(n,'" alt="').concat(t,'" />\n\n                        <div class="book-overlay">\n                       <p class="book-overlay-text">quick view</p>\n                       </div>\n                       </div>                     \n                     <div class="book-card-content">\n                     <h2 class="book-title">').concat(o,'</h2>\n                     <p class="book-author">').concat(a,"</p>\n                     </div>\n                 </a>                    \n              </li>")})).join("")}var D=document.querySelector(".category-list"),G=document.querySelector(".home-title"),K=new(0,s.SwaggerAPI),Q=0;function W(){return(W=e(c)(e(r).mark((function n(){var t,o,a,c,s;return e(r).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,K.fetchTopBooks();case 3:for(t=e.sent.data,o=0;o<4;o++)a=t[o].books,c=0,Q<=767&&(c=1),Q>=768&&Q<1440&&(c=3),Q>=1440&&(c=5),s='<li class="category-list-item top-list-item">\n        <p class="category-name" data-category-name="'.concat(a[0].list_name,'">').concat(a[0].list_name,'</p>\n        <ul class="books-list">\n          ').concat(P(a.slice(0,c)),'\n        </ul>\n       <button class="category-list-button">see more</button>  \n      </li>'),D.insertAdjacentHTML("beforeend",s),Z();e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0);case 10:E();case 11:case"end":return e.stop()}}),n,null,[[0,7]])})))).apply(this,arguments)}function Z(){document.querySelectorAll(".category-list-button").forEach((function(e){e.addEventListener("click",V)}))}function V(e){return Y.apply(this,arguments)}function Y(){return(Y=e(c)(e(r).mark((function n(t){var o,a;return e(r).wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,o=t.target.previousElementSibling.previousElementSibling.textContent,K.categoryName=o,e.next=5,K.fetchBooksByCategory();case 5:a=e.sent.data,G.innerHTML=$(o),D.classList.add("category-list-click"),D.innerHTML=P(a),ee(o),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0);case 15:case"end":return e.stop()}}),n,null,[[0,12]])})))).apply(this,arguments)}function $(e){var n=e.split(" "),t=n[n.length-1],o=n.slice(0,n.length-1).join(" ");return'<span class="home-title-decor">'.concat(o," </span>").concat(t)}function ee(e){var n=document.querySelectorAll(".aside-item"),t=document.querySelector(".aside-title");n.forEach((function(n){e===n.textContent&&(t.classList.toggle("active"),n.classList.toggle("active"))}))}onload=function(e){Q=e.target.body.clientWidth},function(){W.apply(this,arguments)}(),a("b3EoS")}();
//# sourceMappingURL=index.b5ed8b4f.js.map
